{% extends 'appomatic_siteinfo/models/BaseModel/page.html' %}
{% load endless %}

{% block content_title_content %}
  {{block.super}}
  {{obj}}
{% endblock %}

{% block properties %}
  <tr><th>Ingredients</th><td>{{obj.ingredients}}</td></tr>
  <tr><th>CAS type</th><td>{{obj.cas_type}}</td></tr>
  <tr><th>CAS number</th><td>{{obj.cas_number}}</td></tr>
  <tr><th>Aliases</th><td>
    {% for alias in obj.aliases.all %}
      {{alias.name}},
    {% endfor %}
  </td></tr>
  <tr><th>Suppliers</th><td>
    {% for supplier in obj.suppliers.all %}
      {{supplier.render_as.link|safe}},
    {% endfor %}
  </td></tr>
  <tr><th>Purposes</th><td>
    {% for purpose in obj.purposes.all %}
      {{purpose.render_as.link|safe}},
    {% endfor %}
  </td></tr>
{% endblock %}

{% block content %}
  {{block.super}}

  {{obj.comments|default:""}}

  <h2>Events</h2>
  {% paginate 10 obj.used_in_events.all as paginated_usage %}
  <table class="table table-striped table-bordered table-condesed">
    <thead><tr><th>Time</th><th>Supplier</th><th>Purpose</th><th>Type</th><th>Site</th><th>Well</th></tr></thead>
    <tbody>
      {% for usage in paginated_usage %}
        {% with event=usage.event.leafclassobject %}
          <tr>
            <td><a href="{{event.get_absolute_url}}">{{event.datetime}}</a></td>
            <td>{{usage.supplier.render_as.link|safe}}</td>
            <td>{{usage.purpose.render_as.link|safe}}</td>
            <td><a href="{{event.get_absolute_url}}">{{event.type_name}}</a></td>
            <td>{{event.site.render_as.link|safe}}</td>
            <td>{{event.well.render_as.link|safe}}</td>
          </tr>
        {% endwith %}
      {% endfor %}
    </tbody>
  </table>
  <div class="pagination">{% show_pages %}</div>
 
{% endblock %}
